{% extends "layout.html" %}
{% block content %}
    <div>
        <h2>Feed Principal</h2>

        {% for post in lista_de_posts %}
            
            <article style="border: 1px solid #ccc; margin-bottom: 20px; padding: 10px;">
                <hr>
                <h3>{{ post.titulo }}</h3>                        
                <p>{{ post.conteudo }}</p>
                <small>Por: {{ post.autor.nome }}</small>
                {% if post.autor == current_user %}
                    <from action="{{ url_for('apagar_post', post_id=post.id) }}" method="POST" style="display: inline;">
                        <br>
                        <button type="submit" onclick="return confirm('Tem certeza que deseja apagar este post?');">
                            Apagar
                        </button>
                    </from>
                {% endif %}
                <hr> </article> 

        {% else %}
            <p>Nenhuma postagem encontrada. Seja o primeiro a criar uma!</p>
            {% if current_user.is_authenticated %}
                 <a href="{{ url_for('criar_post') }}">Criar Postagem</a>
            {% else %}
                 <a href="{{ url_for('login') }}">Fa√ßa login para criar uma postagem</a>
            {% endif %}

        {% endfor %}

    </div>
{% endblock content %}